@icon-size: 14px;
@block: ~".dnt-notify";

.custom-msg(@primary-color, @message-type, @bg-color: lighten(@primary-color, 50%), @font-color: darken(@primary-color, 20%)) {
    @icon-path: %("./assets/%s.png", @message-type);
    @{block} {
        &__icon--type {
            background-image: url(@icon-path);
        }

        &__indicator {
            background: @primary-color;
        }

        &__message, &__action {
            background-color: @bg-color;
            color: @font-color;
        }
    }
}


@{block} {
    width: 360px;
    display: flex;
    flex-flow: row nowrap;
    border-radius: 4px;
    overflow: hidden;
    box-shadow: rgba(0, 0, 0, 0.2) 0 3px 8px;
    font-family: sans-serif;
    margin-top: 1em;
    margin-left: .5em;
    position: relative;

    &--success {
        .custom-msg(#36b37e, "success");
    }

    &--warning {
        @primary-color: #ffab00;
        .custom-msg(@primary-color, "warning");
    }

    &--info {
        .custom-msg(#2684ff, "info", white, #505f79);
    }

    &--error {
        .custom-msg(#ff5630, "error", tint(#ff5630, 90%));
    }

    &__indicator {
        .icon-container();
        position: relative;
    }

    &__bar {
        display: block;
        position: absolute;
        height: 100%;
        width: 100%;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.25);
    }

    &__message {
        padding: 1em .8em;
        flex: 1 1 auto;
    }

    &__action {
        .icon-container();
        cursor: pointer;
    }

    &__icon {
        height: @icon-size;
        width: $height;
        display: block;
        background-size: cover;

        &--dismiss {
            background-image: url("./assets/delete.png");
        }
    }
}

.icon-container() {
    width: 30px;
    display: flex;
    justify-content: center;
    flex: 0 0 auto;

    @{block}__icon {
        margin-top: 1em;
        z-index: 9;
    }
}
